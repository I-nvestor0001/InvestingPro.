<div class="form-group">
                    <label class="form-label">Full Name</label>
                    <input type="text" class="form-input" id="registerName" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Email</label>
                    <input type="email" class="form-input" id="registerEmail" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Phone</label>
                    <input type="tel" class="form-input" id="registerPhone" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Password</label>
                    <input type="password" class="form-input" id="registerPassword" required minlength="6">
                </div>
                <div class="form-group">
                    <label class="form-label">Referral Code (Optional)</label>
                    <input type="text" class="form-input" id="registerReferral">
                </div>
                <button type="submit" class="btn-primary">Create Account</button>
            </form>
            <div class="toggle-link">
                Have an account? <a onclick="switchToLogin()">Login</a>
            </div>
        </div>
    </div>

    <!-- Purchase Modal -->
    <div id="purchaseModal" class="modal">
        <div class="modal-content">
            <button class="modal-close" onclick="closeModal('purchaseModal')">√ó</button>
            <h2>Purchase Plan</h2>
            <div id="purchaseAlert"></div>
            <div id="purchaseDetails" class="info-box"></div>
            <div id="purchaseCompanyInfo" class="info-box"></div>
            <form onsubmit="confirmPurchase(event)">
                <div class="form-group">
                    <label class="form-label">Payment Proof</label>
                    <textarea class="form-input" id="paymentProof" rows="3" required placeholder="Enter transaction ID or reference"></textarea>
                </div>
                <button type="submit" class="btn-primary">Confirm Purchase</button>
            </form>
        </div>
    </div>

    <script>
        // PERSISTENT DATA STORAGE
        const STORAGE_KEY = 'referEarnProData_v2';
        
        const PLANS = [
            { id: 'silver', name: 'Silver Plan', amount: 3000, returns: 9000, days: 23, featured: false },
            { id: 'gold', name: 'Gold Plan', amount: 10000, returns: 30000, days: 23, featured: true },
            { id: 'platinum', name: 'Platinum Plan', amount: 15000, returns: 45000, days: 23, featured: false },
            { id: 'diamond', name: 'Diamond Plan', amount: 30000, returns: 90000, days: 23, featured: false },
            { id: 'plan100a', name: '100-Day Plan A', amount: 3000, returns: 9000, days: 100, featured: false },
            { id: 'plan100b', name: '100-Day Plan B', amount: 10000, returns: 30000, days: 100, featured: true },
            { id: 'plan100c', name: '100-Day Plan C', amount: 30000, returns: 90000, days: 100, featured: false }
        ];

        let currentUser = null;
        let selectedPlan = null;

        // Initialize Data
        function initData() {
            const stored = localStorage.getItem(STORAGE_KEY);
            if (!stored) {
                const initialData = {
                    users: [
                        {
                            id: 'admin_001',
                            name: 'Administrator',
                            email: 'udofiajoshua04@gmail.com',
                            password: 'Saturday1234',
                            phone: '',
                            isAdmin: true,
                            isActive: true,
                            referralCode: 'ADMIN2025',
                            wallet: { balance: 0, totalDeposited: 0, totalWithdrawn: 0, referralEarnings: 0 },
                            createdAt: new Date().toISOString()
                        }
                    ],
                    investments: [],
                    withdrawals: [],
                    referrals: [],
                    settings: {
                        companyAccount: {
                            accountNumber: '6141876934',
                            bankName: 'OPay',
                            accountName: 'JOSHUA SATURDAY UDOFIA'
                        }
                    }
                };
                localStorage.setItem(STORAGE_KEY, JSON.stringify(initialData));
                return initialData;
            }
            return JSON.parse(stored);
        }

        function saveData(data) {
            localStorage.setItem(STORAGE_KEY, JSON.stringify(data));
        }

        function generateId() {
            return Date.now() + '_' + Math.random().toString(36).substr(2, 9);
        }

        function generateReferralCode() {
            return 'REF' + Date.now().toString(36).toUpperCase();
        }

        // Check Session
        function checkSession() {
            const userId = localStorage.getItem('currentUserId');
            if (userId) {
                const data = initData();
                const user = data.users.find(u => u.id === userId);
                if (user) {
                    currentUser = user;
                    if (user.isAdmin) {
                        showAdminDashboard();
                    } else {
                        showUserDashboard();
                    }
                }
            }
        }

        // Auth Functions
        function handleLogin(e) {
            e.preventDefault();
            const email = document.getElementById('loginEmail').value.trim();
            const password = document.getElementById('loginPassword').value;

            const data = initData();
            const user = data.users.find(u => u.email === email && u.password === password);

            if (!user) {
                showAlert('loginAlert', '‚ùå Invalid email or password', 'error');
                return;
            }

            if (!user.isActive && !user.isAdmin) {
                showAlert('loginAlert', '‚ùå Account deactivated. Contact admin.', 'error');
                return;
            }

            currentUser = user;
            localStorage.setItem('currentUserId', user.id);
            closeModal('loginModal');

            if (user.isAdmin) {
                showAdminDashboard();
            } else {
                showUserDashboard();
            }
        }

        function handleRegister(e) {
            e.preventDefault();
            const name = document.getElementById('registerName').value.trim();
            const email = document.getElementById('registerEmail').value.trim();
            const phone = document.getElementById('registerPhone').value.trim();
            const password = document.getElementById('registerPassword').value;
            const referralCode = document.getElementById('registerReferral').value.trim();

            const data = initData();

            if (data.users.find(u => u.email === email)) {
                showAlert('registerAlert', '‚ùå Email already registered', 'error');
                return;
            }

            const newUser = {
                id: generateId(),
                name,
                email,
                phone,
                password,
                isAdmin: false,
                isActive: true,
                referralCode: generateReferralCode(),
                referredBy: referralCode || null,
                wallet: { balance: 0, totalDeposited: 0, totalWithdrawn: 0, referralEarnings: 0 },
                createdAt: new Date().toISOString()
            };

            data.users.push(newUser);

            // Add referral entry
            if (referralCode) {
                const referrer = data.users.find(u => u.referralCode === referralCode);
                if (referrer) {
                    data.referrals.push({
                        id: generateId(),
                        referrerId: referrer.id,
                        referredUserId: newUser.id,
                        referredUserName: newUser.name,
                        referredUserEmail: newUser.email,
                        hasPurchased: false,
                        earningPaid: false,
                        joinDate: new Date().toISOString()
                    });
                }
            }

            saveData(data);

            showAlert('registerAlert', '‚úÖ Account created! Please login.', 'success');
            setTimeout(() => {
                closeModal('registerModal');
                document.getElementById('loginEmail').value = email;
                showLogin();
            }, 2000);
        }

        function logout() {
            localStorage.removeItem('currentUserId');
            currentUser = null;
            document.getElementById('landingPage').style.display = 'block';
            document.getElementById('userDashboard').style.display = 'none';
            document.getElementById('adminDashboard').classList.add('hidden');
            document.getElementById('navButtons').innerHTML = '<button class="nav-btn" onclick="showLogin()">Login</button>';
        }

        // User Dashboard
        function showUserDashboard() {
            document.getElementById('landingPage').style.display = 'none';
            document.getElementById('userDashboard').style.display = 'block';
            document.getElementById('adminDashboard').classList.add('hidden');
            document.getElementById('navButtons').innerHTML = '<button class="nav-btn" onclick="logout()">Logout</button>';
            loadUserDashboard();
        }

        function loadUserDashboard() {
            const data = initData();
            currentUser = data.users.find(u => u.id === currentUser.id);

            // Update wallet
            document.getElementById('walletBalance').textContent = '‚Ç¶' + currentUser.wallet.balance.toLocaleString();
            document.getElementById('walletDeposited').textContent = '‚Ç¶' + currentUser.wallet.totalDeposited.toLocaleString();
            document.getElementById('walletWithdrawn').textContent = '‚Ç¶' + currentUser.wallet.totalWithdrawn.toLocaleString();
            
            const userReferrals = data.referrals.filter(r => r.referrerId === currentUser.id);
            document.getElementById('walletReferrals').textContent = userReferrals.length;
            document.getElementById('walletRefEarnings').textContent = '‚Ç¶' + currentUser.wallet.referralEarnings.toLocaleString();

            // Load plans
            loadUserPlans();

            // Load investments
            loadUserInvestments(data);

            // Load referrals
            loadUserReferrals(data);

            // Load referral link
            const refLink = window.location.origin + window.location.pathname + '?ref=' + currentUser.referralCode;
            document.getElementById('userReferralLink').textContent = refLink;
        }

        function loadUserPlans() {
            const html = PLANS.map(plan => {
                const roi = Math.round((plan.returns - plan.amount) / plan.amount * 100);
                return `
                    <div class="plan-card ${plan.featured ? 'featured' : ''}">
                        ${plan.featured ? '<div class="plan-badge">‚≠ê Popular</div>' : ''}
                        <div class="plan-name">${plan.name}</div>
                        <div class="plan-amount">‚Ç¶${plan.amount.toLocaleString()}</div>
                        <div class="plan-return">Returns: ‚Ç¶${plan.returns.toLocaleString()}</div>
                        <div class="plan-info">
                            <span>üìÖ ${plan.days} days</span>
                            <span>üöÄ ${roi}% ROI</span>
                        </div>
                        <button class="btn-invest" onclick="openPurchaseModal('${plan.id}')">Invest Now</button>
                    </div>
                `;
            }).join('');
            document.getElementById('userPlansGrid').innerHTML = html;
        }

        function loadUserInvestments(data) {
            const investments = data.investments.filter(inv => inv.userId === currentUser.id);
            
            if (investments.length === 0) {
                document.getElementById('userInvestmentsList').innerHTML = '<div class="empty-state"><div class="empty-icon">üìä</div><p>No investments yet</p></div>';
                return;
            }

            const html = investments.map(inv => `
                <div class="investment-item">
                    <div class="inv-header">
                        <div class="inv-plan">${inv.planName}</div>
                        <div class="inv-badge inv-badge-${inv.status}">${inv.status}</div>
                    </div>
                    <div class="inv-info">üìÖ ${new Date(inv.purchaseDate).toLocaleDateString()} - ${new Date(inv.maturityDate).toLocaleDateString()}</div>
                    <div class="inv-amounts">
                        <div class="inv-amount">
                            <span class="inv-amount-value" style="color: var(--primary);">‚Ç¶${inv.amount.toLocaleString()}</span>
                            <span class="inv-amount-label">Invested</span>
                        </div>
                        <div class="inv-amount">
                            <span class="inv-amount-value" style="color: var(--success);">‚Ç¶${inv.expectedReturn.toLocaleString()}</span>
                            <span class="inv-amount-label">Returns</span>
                        </div>
                    </div>
                </div>
            `).join('');

            document.getElementById('userInvestmentsList').innerHTML = html;
        }

        function loadUserReferrals(data) {
            const referrals = data.referrals.filter(r => r.referrerId === currentUser.id);
            
            if (referrals.length === 0) {
                document.getElementById('userReferralsList').innerHTML = '<div class="empty-state"><div class="empty-icon">ü§ù</div><p>No referrals yet</p></div>';
                return;
            }

            const html = referrals.map(ref => `
                <div class="user-item">
                    <div class="user-header">
                        <div class="user-name">${ref.referredUserName}</div>
                        <div class="user-badge ${ref.hasPurchased ? 'old' : 'new'}">${ref.hasPurchased ? '‚úì Invested' : 'Pending'}</div>
                    </div>
                    <div class="user-email">${ref.referredUserEmail}</div>
                    <div style="font-size: 0.85rem; color: #64748b;">Joined: ${new Date(ref.joinDate).toLocaleDateString()}</div>
                    ${ref.earningPaid ? '<div style="color: var(--success); font-weight: 600; margin-top: 0.5rem;">‚úÖ Earned: ‚Ç¶1,500</div>' : ''}
                </div>
            `).join('');

            document.getElementById('userReferralsList').innerHTML = html;
        }

        function openPurchaseModal(planId) {
            selectedPlan = PLANS.find(p => p.id === planId);
            const data = initData();

            document.getElementById('purchaseDetails').innerHTML = `
                <strong>${selectedPlan.name}</strong><br>
                üí∞ Amount: ‚Ç¶${selectedPlan.amount.toLocaleString()}<br>
                üìà Returns: ‚Ç¶${selectedPlan.returns.toLocaleString()}<br>
                ‚è∞ Duration: ${selectedPlan.days} days
            `;

            document.getElementById('purchaseCompanyInfo').innerHTML = `
                <strong>Transfer to:</strong><br>
                üè¶ ${data.settings.companyAccount.bankName}<br>
                üí≥ ${data.settings.companyAccount.accountNumber}<br>
                üë§ ${data.settings.companyAccount.accountName}
            `;

            document.getElementById('purchaseModal').style.display = 'block';
        }

        function confirmPurchase(e) {
            e.preventDefault();
            const paymentProof = document.getElementById('paymentProof').value.trim();

            const data = initData();
            const maturityDate = new Date();
            maturityDate.setDate(maturityDate.getDate() + selectedPlan.days);

            data.investments.push({
                id: generateId(),
                userId: currentUser.id,
                userName: currentUser.name,
                userEmail: currentUser.email,
                planId: selectedPlan.id,
                planName: selectedPlan.name,
                amount: selectedPlan.amount,
                expectedReturn: selectedPlan.returns,
                duration: selectedPlan.days,
                paymentProof,
                status: 'pending',
                purchaseDate: new Date().toISOString(),
                maturityDate: maturityDate.toISOString()
            });

            saveData(data);

            showAlert('purchaseAlert', '‚úÖ Investment submitted! Waiting for admin approval.', 'success');
            document.getElementById('paymentProof').value = '';

            setTimeout(() => {
                closeModal('purchaseModal');
                loadUserDashboard();
            }, 2000);
        }

        function submitWithdrawal(e) {
            e.preventDefault();
            const amount = parseFloat(document.getElementById('withdrawAmount').value);
            const bank = document.getElementById('withdrawBank').value.trim();
            const account = document.getElementById('withdrawAccount').value.trim();
            const name = document.getElementById('withdrawName').value.trim();

            if (amount > currentUser.wallet.balance) {
                showAlert('withdrawAlert', '‚ùå Insufficient balance', 'error');
                return;
            }

            const data = initData();
            data.withdrawals.push({
                id: generateId(),
                userId: currentUser.id,
                userName: currentUser.name,
                userEmail: currentUser.email,
                amount,
                bankName: bank,
                accountNumber: account,
                accountName: name,
                status: 'pending',
                requestDate: new Date().toISOString()
            });

            saveData(data);

            showAlert('withdrawAlert', '‚úÖ Withdrawal request submitted!', 'success');
            e.target.reset();
        }

        function copyLink() {
            const link = document.getElementById('userReferralLink').textContent;
            navigator.clipboard.writeText(link).then(() => {
                alert('‚úÖ Link copied to clipboard!');
            });
        }

        // Admin Dashboard
        function showAdminDashboard() {
            document.getElementById('landingPage').style.display = 'none';
            document.getElementById('userDashboard').style.display = 'none';
            document.getElementById('adminDashboard').classList.remove('hidden');
            document.getElementById('navButtons').innerHTML = '<button class="nav-btn" onclick="logout()">Logout</button>';
            loadAdminDashboard();
        }

        function loadAdminDashboard() {
            const data = initData();
            currentUser = data.users.find(u => u.id === currentUser.id);

            const regularUsers = data.users.filter(u => !u.isAdmin);
            const totalInvested = data.investments.filter(inv => inv.status === 'active').reduce((sum, inv) => sum + inv.amount, 0);
            const totalDeposits = regularUsers.reduce((sum, u) => sum + u.wallet.totalDeposited, 0);
            const pendingCount = data.investments.filter(inv => inv.status === 'pending').length;

            document.getElementById('adminTotalUsers').textContent = regularUsers.length;
            document.getElementById('adminTotalInvested').textContent = '‚Ç¶' + totalInvested.toLocaleString();
            document.getElementById('adminTotalDeposits').textContent = '‚Ç¶' + totalDeposits.toLocaleString();
            document.getElementById('adminPending').textContent = pendingCount;

            loadAdminUsers(data);
            loadAdminInvestments(data);
            loadAdminWithdrawals(data);
            loadAdminSettings(data);
        }

        function loadAdminUsers(data) {
            const users = data.users.filter(u => !u.isAdmin);
            
            if (users.length === 0) {
                document.getElementById('adminUsersList').innerHTML = '<div class="empty-state"><div class="empty-icon">üë•</div><p>No users yet</p></div>';
                return;
            }

            // Sort: newest first
            users.sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt));

            const html = users.map(user => {
                const userInvestments = data.investments.filter(inv => inv.userId === user.id);
                const activeInvestments = userInvestments.filter(inv => inv.status === 'active');
                const totalInvested = activeInvestments.reduce((sum, inv) => sum + inv.amount, 0);
                
                const daysSinceJoin = Math.floor((new Date() - new Date(user.createdAt)) / (1000 * 60 * 60 * 24));
                const isNew = daysSinceJoin <= 7;

                return `
                    <div class="user-item">
                        <div class="user-header">
                            <div class="user-name">${user.name}</div>
                            <div class="user-badge ${isNew ? 'new' : 'old'}">${isNew ? 'üÜï New' : '‚≠ê Member'}</div>
                        </div>
                        <div class="user-email">üìß ${user.email} | üì± ${user.phone}</div>
                        <div class="user-stats">
                            <div class="user-stat">
                                <span class="user-stat-value">‚Ç¶${user.wallet.balance.toLocaleString()}</span>
                                <span class="user-stat-label">Balance</span>
                            </div>
                            <div class="user-stat">
                                <span class="user-stat-value">‚Ç¶${totalInvested.toLocaleString()}</span>
                                <span class="user-stat-label">Invested</span>
                            </div>
                            <div class="user-stat">
                                <span class="user-stat-value">${userInvestments.length}</span>
                                <span class="user-stat-label">Investments</span>
                            </div>
                        </div>
                        <div class="admin-actions">
                            ${user.isActive ? 
                                `<button class="btn-small btn-reject" onclick="toggleUserStatus('${user.id}', false)">üö´ Deactivate</button>` :
                                `<button class="btn-small btn-approve" onclick="toggleUserStatus('${user.id}', true)">‚úÖ Activate</button>`
                            }
                            <button class="btn-small btn-reject" onclick="deleteUser('${user.id}')">üóëÔ∏è Delete</button>
                        </div>
                    </div>
                `;
            }).join('');

            document.getElementById('adminUsersList').innerHTML = html;
        }

        function loadAdminInvestments(data) {
            const pending = data.investments.filter(inv => inv.status === 'pending');
            const active = data.investments.filter(inv => inv.status === 'active');

            // Pending
            if (pending.length === 0) {
                document.getElementById('adminPendingList').innerHTML = '<div class="empty-state"><div class="empty-icon">‚è≥</div><p>No pending investments</p></div>';
            } else {
                const html = pending.map(inv => `
                    <div class="investment-item">
                        <div class="inv-header">
                            <div class="inv-plan">${inv.planName}</div>
                            <div class="inv-badge inv-badge-pending">Pending</div>
                        </div>
                        <div class="inv-info">üë§ ${inv.userName} (${inv.userEmail})</div>
                        <div class="inv-info">üìÖ ${new Date(inv.purchaseDate).toLocaleDateString()}</div>
                        <div class="inv-info">üí≥ Proof: ${inv.paymentProof}</div>
                        <div class="inv-amounts">
                            <div class="inv-amount">
                                <span class="inv-amount-value" style="color: var(--primary);">‚Ç¶${inv.amount.toLocaleString()}</span>
                                <span class="inv-amount-label">Amount</span>
                            </div>
                            <div class="inv-amount">
                                <span class="inv-amount-value" style="color: var(--success);">‚Ç¶${inv.expectedReturn.toLocaleString()}</span>
                                <span class="inv-amount-label">Returns</span>
                            </div>
                        </div>
                        <div class="admin-actions">
                            <button class="btn-small btn-approve" onclick="approveInvestment('${inv.id}')">‚úÖ Approve</button>
                            <button class="btn-small btn-reject" onclick="rejectInvestment('${inv.id}')">‚ùå Reject</button>
                        </div>
                    </div>
                `).join('');
                document.getElementById('adminPendingList').innerHTML = html;
            }

            // Active
            if (active.length === 0) {
                document.getElementById('adminActiveList').innerHTML = '<div class="empty-state"><div class="empty-icon">üìä</div><p>No active investments</p></div>';
            } else {
                const html = active.map(inv => `
                    <div class="investment-item">
                        <div class="inv-header">
                            <div class="inv-plan">${inv.planName}</div>
                            <div class="inv-badge inv-badge-active">Active</div>
                        </div>
                        <div class="inv-info">üë§ ${inv.userName}</div>
                        <div class="inv-info">üìÖ ${new Date(inv.purchaseDate).toLocaleDateString()} ‚Üí ${new Date(inv.maturityDate).toLocaleDateString()}</div>
                        <div class="inv-amounts">
                            <div class="inv-amount">
                                <span class="inv-amount-value" style="color: var(--primary);">‚Ç¶${inv.amount.toLocaleString()}</span>
                                <span class="inv-amount-label">Invested</span>
                            </div>
                            <div class="inv-amount">
                                <span class="inv-amount-value" style="color: var(--success);">‚Ç¶${inv.expectedReturn.toLocaleString()}</span>
                                <span class="inv-amount-label">Returns</span>
                            </div>
                        </div>
                    </div>
                `).join('');
                document.getElementById('adminActiveList').innerHTML = html;
            }
        }

        function loadAdminWithdrawals(data) {
            const withdrawals = data.withdrawals.filter(wd => wd.status === 'pending');
            
            if (withdrawals.length === 0) {
                document.getElementById('adminWithdrawalsList').innerHTML = '<div class="empty-state"><div class="empty-icon">üí∏</div><p>No pending withdrawals</p></div>';
                return;
            }

            const html = withdrawals.map(wd => `
                <div class="investment-item">
                    <div class="inv-header">
                        <div class="inv-plan">Withdrawal Request</div>
                        <div class="inv-badge inv-badge-pending">Pending</div>
                    </div>
                    <div class="inv-info">üë§ ${wd.userName} (${wd.userEmail})</div>
                    <div class="inv-info">üí∞ Amount: ‚Ç¶${wd.amount.toLocaleString()}</div>
                    <div class="inv-info">üè¶ ${wd.bankName}</div>
                    <div class="inv-info">üí≥ ${wd.accountNumber} - ${wd.accountName}</div>
                    <div class="inv-info">üìÖ ${new Date(wd.requestDate).toLocaleDateString()}</div>
                    <div class="admin-actions">
                        <button class="btn-small btn-approve" onclick="approveWithdrawal('${wd.id}')">‚úÖ Approve</button>
                        <button class="btn-small btn-reject" onclick="rejectWithdrawal('${wd.id}')">‚ùå Reject</button>
                    </div>
                </div>
            `).join('');

            document.getElementById('adminWithdrawalsList').innerHTML = html;
        }

        function loadAdminSettings(data) {
            document.getElementById('adminAccNumber').value = data.settings.companyAccount.accountNumber;
            document.getElementById('adminBank').value = data.settings.companyAccount.bankName;
            document.getElementById('adminAccName').value = data.settings.companyAccount.accountName;
        }

        function approveInvestment(invId) {
            if (!confirm('Approve this investment?')) return;

            const data = initData();
            const inv = data.investments.find(i => i.id === invId);
            const user = data.users.find(u => u.id === inv.userId);

            inv.status = 'active';
            inv.approvedDate = new Date().toISOString();

            user.wallet.totalDeposited += inv.amount;
            user.wallet.balance += inv.expectedReturn;

            // Check referral bonus
            const userInvestments = data.investments.filter(i => i.userId === user.id && i.status === 'active');
            if (userInvestments.length === 1 && user.referredBy) {
                const referrer = data.users.find(u => u.referralCode === user.referredBy);
                if (referrer) {
                    const referral = data.referrals.find(r => r.referrerId === referrer.id && r.referredUserId === user.id);
                    if (referral && !referral.earningPaid) {
                        referrer.wallet.balance += 1500;
                        referrer.wallet.referralEarnings += 1500;
                        referral.hasPurchased = true;
                        referral.earningPaid = true;
                    }
                }
            }

            saveData(data);
            alert('‚úÖ Investment approved!');
            loadAdminDashboard();
        }

        function rejectInvestment(invId) {
            if (!confirm('Reject this investment?')) return;

            const data = initData();
            data.investments = data.investments.filter(i => i.id !== invId);
            saveData(data);

            alert('‚ùå Investment rejected!');
            loadAdminDashboard();
        }

        function approveWithdrawal(wdId) {
            if (!confirm('Approve this withdrawal? Make sure payment is sent!')) return;

            const data = initData();
            const wd = data.withdrawals.find(w => w.id === wdId);
            const user = data.users.find(u => u.id === wd.userId);

            user.wallet.balance -= wd.amount;
            user.wallet.totalWithdrawn += wd.amount;

            wd.status = 'completed';
            wd.completedDate = new Date().toISOString();

            saveData(data);
            alert('‚úÖ Withdrawal approved!');
            loadAdminDashboard();
        }

        function rejectWithdrawal(wdId) {
            if (!confirm('Reject this withdrawal?')) return;

            const data = initData();
            data.withdrawals = data.withdrawals.filter(w => w.id !== wdId);
            saveData(data);

            alert('‚ùå Withdrawal rejected!');
            loadAdminDashboard();
        }

        function toggleUserStatus(userId, activate) {
            if (!confirm(activate ? 'Activate this user?' : 'Deactivate this user?')) return;

            const data = initData();
            const user = data.users.find(u => u.id === userId);
            user.isActive = activate;

            saveData(data);
            alert(activate ? '‚úÖ User activated!' : 'üö´ User deactivated!');
            loadAdminDashboard();
        }

        function deleteUser(userId) {
            if (!confirm('‚ö†Ô∏è DELETE this user permanently? This cannot be undone!')) return;
            if (!confirm('Are you absolutely sure?')) return;

            const data = initData();
            data.users = data.users.filter(u => u.id !== userId);
            data.investments = data.investments.filter(inv => inv.userId !== userId);
            data.withdrawals = data.withdrawals.filter(wd => wd.userId !== userId);
            data.referrals = data.referrals.filter(r => r.referrerId !== userId && r.referredUserId !== userId);

            saveData(data);
            alert('‚úÖ User deleted!');
            loadAdminDashboard();
        }

        function updateCompanyAccount(e) {
            e.preventDefault();

            const data = initData();
            data.settings.companyAccount = {
                accountNumber: document.getElementById('adminAccNumber').value.trim(),
                bankName: document.getElementById('adminBank').value.trim(),
                accountName: document.getElementById('adminAccName').value.trim()
            };

            saveData(data);
            alert('‚úÖ Company account updated!');
        }

        // Color Theme
        function changeColor(primary, secondary, accent) {
            document.documentElement.style.setProperty('--primary', primary);
            document.documentElement.style.setProperty('--secondary', secondary);
            document.documentElement.style.setProperty('--accent', accent);

            // Save preference
            localStorage.setItem('themeColors', JSON.stringify({ primary, secondary, accent }));

            // Update active state
            document.querySelectorAll('.color-option').forEach(opt => opt.classList.remove('active'));
            event.target.classList.add('active');
        }

        // Load saved theme
        function loadTheme() {
            const saved = localStorage.getItem('themeColors');
            if (saved) {
                const colors = JSON.parse(saved);
                document.documentElement.style.setProperty('--primary', colors.primary);
                document.documentElement.style.setProperty('--secondary', colors.secondary);
                document.documentElement.style.setProperty('--accent', colors.accent);
            }
        }

        // Tab Navigation
        function showUserTab(tab) {
            document.querySelectorAll('#userDashboard .tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('#userDashboard .tab-content').forEach(c => c.classList.remove('active'));
            
            event.target.classList.add('active');
            document.getElementById(`tab-${tab}`).classList.add('active');
        }

        function showAdminTab(tab) {
            document.querySelectorAll('#adminDashboard .tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('#adminDashboard .tab-content').forEach(c => c.classList.remove('active'));
            
            event.target.classList.add('active');
            document.getElementById(`admin-tab-${tab}`).classList.add('active');
        }

        // Modal Functions
        function showLogin() {
            document.getElementById('loginModal').style.display = 'block';
        }

        function showRegister() {
            const urlParams = new URLSearchParams(window.location.search);
            const ref = urlParams.get('ref');
            if (ref) {
                document.getElementById('registerReferral').value = ref;
            }
            document.getElementById('registerModal').style.display = 'block';
        }

        function closeModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
        }

        function switchToRegister() {
            closeModal('loginModal');
            showRegister();
        }

        function switchToLogin() {
            closeModal('registerModal');
            showLogin();
        }

        function showAlert(id, message, type) {
            const el = document.getElementById(id);
            el.innerHTML = `<div class="alert alert-${type}">${message}</div>`;
            setTimeout(() => el.innerHTML = '', 5000);
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            initData();
            loadTheme();
            checkSession();

            // Check for referral in URL
            const urlParams = new URLSearchParams(window.location.search);
            if (urlParams.get('ref')) {
                showRegister();
            }
        });

        // Close modal on outside click
        window.onclick = (e) => {
            if (e.target.classList.contains('modal')) {
                e.target.style.display = 'none';
            }
        };
    </script>
</body>
</html><!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ReferAndEarnPro - Investment Platform</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            /* Change these colors easily! */
            --primary: #6366f1;
            --secondary: #8b5cf6;
            --accent: #ec4899;
            --success: #10b981;
            --danger: #ef4444;
            --dark: #1e293b;
            --light: #f1f5f9;
            --white: #ffffff;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background: var(--light);
            color: var(--dark);
        }

        /* Navbar */
        .navbar {
            background: var(--white);
            padding: 0.75rem 1rem;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .nav-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1200px;
            margin: 0 auto;
        }

        .logo {
            font-size: 1.1rem;
            font-weight: 700;
            color: var(--primary);
        }

        .nav-btn {
            background: var(--primary);
            color: var(--white);
            border: none;
            padding: 0.5rem 1.2rem;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            font-size: 0.85rem;
        }

        /* Container */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 1rem;
        }

        /* Hero */
        .hero {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: var(--white);
            padding: 2rem 1rem;
            text-align: center;
            border-radius: 0 0 30px 30px;
        }

        .hero h1 {
            font-size: 1.5rem;
            margin-bottom: 0.5rem;
        }

        .hero p {
            font-size: 0.9rem;
            margin-bottom: 1rem;
            opacity: 0.9;
        }

        .hero-btn {
            background: var(--white);
            color: var(--primary);
            border: none;
            padding: 0.75rem 2rem;
            border-radius: 25px;
            font-weight: 700;
            cursor: pointer;
        }

        /* Dashboard */
        .dashboard {
            display: none;
        }

        /* Wallet Card */
        .wallet-card {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: var(--white);
            padding: 1.5rem;
            border-radius: 20px;
            margin-bottom: 1rem;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        .wallet-label {
            font-size: 0.85rem;
            opacity: 0.9;
            margin-bottom: 0.25rem;
        }

        .wallet-amount {
            font-size: 2rem;
            font-weight: 800;
            margin-bottom: 1rem;
        }

        .wallet-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 0.5rem;
        }

        .wallet-item {
            background: rgba(255,255,255,0.2);
            padding: 0.75rem;
            border-radius: 10px;
            text-align: center;
        }

        .wallet-item-value {
            font-size: 1.1rem;
            font-weight: 700;
            display: block;
        }

        .wallet-item-label {
            font-size: 0.7rem;
            opacity: 0.9;
            display: block;
            margin-top: 0.25rem;
        }

        /* Tabs */
        .tabs {
            display: flex;
            gap: 0.5rem;
            overflow-x: auto;
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
        }

        .tabs::-webkit-scrollbar {
            height: 4px;
        }

        .tabs::-webkit-scrollbar-thumb {
            background: var(--primary);
            border-radius: 4px;
        }

        .tab {
            background: var(--white);
            border: none;
            padding: 0.6rem 1rem;
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
            white-space: nowrap;
            font-size: 0.85rem;
            color: var(--dark);
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }

        .tab.active {
            background: var(--primary);
            color: var(--white);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        /* Card */
        .card {
            background: var(--white);
            padding: 1rem;
            border-radius: 15px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            margin-bottom: 1rem;
        }

        .card-title {
            font-size: 1rem;
            font-weight: 700;
            margin-bottom: 1rem;
            color: var(--dark);
        }

        /* Plans */
        .plans-grid {
            display: grid;
            gap: 1rem;
        }

        .plan-card {
            background: var(--white);
            padding: 1rem;
            border-radius: 15px;
            border: 2px solid var(--light);
            transition: all 0.3s;
        }

        .plan-card:active {
            transform: scale(0.98);
        }

        .plan-card.featured {
            border-color: var(--accent);
            background: linear-gradient(135deg, #fff5f7, var(--white));
        }

        .plan-badge {
            background: var(--accent);
            color: var(--white);
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-size: 0.7rem;
            font-weight: 700;
            display: inline-block;
            margin-bottom: 0.5rem;
        }

        .plan-name {
            font-size: 1.1rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
        }

        .plan-amount {
            font-size: 1.5rem;
            font-weight: 800;
            color: var(--primary);
            margin-bottom: 0.25rem;
        }

        .plan-return {
            color: var(--success);
            font-weight: 600;
            font-size: 0.9rem;
            margin-bottom: 0.5rem;
        }

        .plan-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.75rem;
            font-size: 0.85rem;
            color: #64748b;
        }

        .btn-invest {
            width: 100%;
            padding: 0.75rem;
            background: var(--primary);
            color: var(--white);
            border: none;
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
            font-size: 0.9rem;
        }

        /* User List */
        .user-item {
            background: var(--white);
            padding: 1rem;
            border-radius: 12px;
            margin-bottom: 0.75rem;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }

        .user-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.5rem;
        }

        .user-name {
            font-weight: 700;
            font-size: 1rem;
            color: var(--dark);
        }

        .user-badge {
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-size: 0.7rem;
            font-weight: 600;
        }

        .user-badge.new {
            background: #fef3c7;
            color: #92400e;
        }

        .user-badge.old {
            background: #dbeafe;
            color: #1e40af;
        }

        .user-email {
            font-size: 0.85rem;
            color: #64748b;
            margin-bottom: 0.5rem;
        }

        .user-stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 0.5rem;
            margin-top: 0.75rem;
        }

        .user-stat {
            text-align: center;
            padding: 0.5rem;
            background: var(--light);
            border-radius: 8px;
        }

        .user-stat-value {
            font-weight: 700;
            font-size: 0.9rem;
            color: var(--primary);
            display: block;
        }

        .user-stat-label {
            font-size: 0.7rem;
            color: #64748b;
            display: block;
        }

        /* Investment Item */
        .investment-item {
            background: var(--white);
            padding: 1rem;
            border-radius: 12px;
            margin-bottom: 0.75rem;
            border-left: 4px solid var(--primary);
        }

        .inv-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.5rem;
        }

        .inv-plan {
            font-weight: 700;
            font-size: 1rem;
        }

        .inv-badge {
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-size: 0.7rem;
            font-weight: 600;
        }

        .inv-badge.pending {
            background: #fef3c7;
            color: #92400e;
        }

        .inv-badge.active {
            background: #d1fae5;
            color: #065f46;
        }

        .inv-badge.completed {
            background: #dbeafe;
            color: #1e40af;
        }

        .inv-info {
            font-size: 0.85rem;
            color: #64748b;
            margin-bottom: 0.25rem;
        }

        .inv-amounts {
            display: flex;
            justify-content: space-between;
            margin-top: 0.75rem;
            padding-top: 0.75rem;
            border-top: 1px solid var(--light);
        }

        .inv-amount {
            text-align: center;
        }

        .inv-amount-value {
            font-weight: 700;
            font-size: 1rem;
            display: block;
        }

        .inv-amount-label {
            font-size: 0.7rem;
            color: #64748b;
        }

        /* Admin Actions */
        .admin-actions {
            display: flex;
            gap: 0.5rem;
            margin-top: 0.75rem;
        }

        .btn-small {
            flex: 1;
            padding: 0.5rem;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            font-size: 0.8rem;
        }

        .btn-approve {
            background: var(--success);
            color: var(--white);
        }

        .btn-reject {
            background: var(--danger);
            color: var(--white);
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
            overflow-y: auto;
            padding: 1rem;
        }

        .modal-content {
            background: var(--white);
            max-width: 500px;
            margin: 2rem auto;
            padding: 1.5rem;
            border-radius: 20px;
            position: relative;
        }

        .modal-close {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: var(--light);
            border: none;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 1.2rem;
        }

        .modal h2 {
            font-size: 1.3rem;
            margin-bottom: 0.5rem;
        }

        .modal-subtitle {
            color: #64748b;
            margin-bottom: 1.5rem;
            font-size: 0.85rem;
        }

        /* Form */
        .form-group {
            margin-bottom: 1rem;
        }

        .form-label {
            display: block;
            font-weight: 600;
            margin-bottom: 0.5rem;
            font-size: 0.85rem;
        }

        .form-input {
            width: 100%;
            padding: 0.75rem;
            border: 2px solid var(--light);
            border-radius: 10px;
            font-size: 0.9rem;
            font-family: inherit;
        }

        .form-input:focus {
            outline: none;
            border-color: var(--primary);
        }

        .btn-primary {
            width: 100%;
            padding: 0.875rem;
            background: var(--primary);
            color: var(--white);
            border: none;
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
        }

        .toggle-link {
            text-align: center;
            margin-top: 1rem;
            font-size: 0.85rem;
        }

        .toggle-link a {
            color: var(--primary);
            cursor: pointer;
            text-decoration: none;
            font-weight: 600;
        }

        /* Alert */
        .alert {
            padding: 0.75rem;
            border-radius: 10px;
            margin-bottom: 1rem;
            font-size: 0.85rem;
        }

        .alert-success {
            background: #d1fae5;
            color: #065f46;
        }

        .alert-error {
            background: #fee2e2;
            color: #991b1b;
        }

        /* Empty State */
        .empty-state {
            text-align: center;
            padding: 2rem 1rem;
            color: #94a3b8;
        }

        .empty-icon {
            font-size: 3rem;
            margin-bottom: 0.5rem;
        }

        /* Info Box */
        .info-box {
            background: linear-gradient(135deg, #fef3c7, #fef9c3);
            padding: 1rem;
            border-radius: 12px;
            margin-bottom: 1rem;
            font-size: 0.85rem;
            border-left: 4px solid var(--accent);
        }

        .info-box p {
            margin-bottom: 0.5rem;
        }

        /* Referral Link */
        .referral-box {
            background: var(--light);
            padding: 1rem;
            border-radius: 10px;
            margin-bottom: 1rem;
        }

        .referral-link {
            font-size: 0.75rem;
            font-family: monospace;
            color: var(--primary);
            word-break: break-all;
            margin-bottom: 0.75rem;
        }

        .btn-copy {
            width: 100%;
            padding: 0.75rem;
            background: var(--accent);
            color: var(--white);
            border: none;
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
        }

        /* Settings */
        .settings-section {
            margin-bottom: 1.5rem;
        }

        .settings-title {
            font-size: 1rem;
            font-weight: 700;
            margin-bottom: 1rem;
        }

        .color-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 0.75rem;
        }

        .color-option {
            aspect-ratio: 1;
            border-radius: 15px;
            cursor: pointer;
            border: 3px solid transparent;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
        }

        .color-option.active {
            border-color: var(--dark);
        }

        .hidden {
            display: none !important;
        }

        @media (min-width: 640px) {
            .plans-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            .wallet-grid {
                grid-template-columns: repeat(4, 1fr);
            }
        }
    </style>
</head>
<body>
    <!-- Navbar -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="logo">üíé ReferAndEarnPro</div>
            <div id="navButtons">
                <button class="nav-btn" onclick="showLogin()">Login</button>
            </div>
        </div>
    </nav>

    <!-- Landing Page -->
    <div id="landingPage">
        <div class="hero">
            <h1>üöÄ Smart Investment Platform</h1>
            <p>Invest ‚Ç¶3K-‚Ç¶30K, Earn 3X Returns. Refer & Earn ‚Ç¶1,500!</p>
            <button class="hero-btn" onclick="showRegister()">Start Now</button>
        </div>
    </div>

    <!-- User Dashboard -->
    <div id="userDashboard" class="dashboard">
        <div class="container">
            <div class="wallet-card">
                <div class="wallet-label">Total Balance</div>
                <div class="wallet-amount" id="walletBalance">‚Ç¶0</div>
                <div class="wallet-grid">
                    <div class="wallet-item">
                        <span class="wallet-item-value" id="walletDeposited">‚Ç¶0</span>
                        <span class="wallet-item-label">Deposited</span>
                    </div>
                    <div class="wallet-item">
                        <span class="wallet-item-value" id="walletWithdrawn">‚Ç¶0</span>
                        <span class="wallet-item-label">Withdrawn</span>
                    </div>
                    <div class="wallet-item">
                        <span class="wallet-item-value" id="walletReferrals">0</span>
                        <span class="wallet-item-label">Referrals</span>
                    </div>
                    <div class="wallet-item">
                        <span class="wallet-item-value" id="walletRefEarnings">‚Ç¶0</span>
                        <span class="wallet-item-label">Ref Earnings</span>
                    </div>
                </div>
            </div>

            <div class="tabs">
                <button class="tab active" onclick="showUserTab('plans')">üíé Plans</button>
                <button class="tab" onclick="showUserTab('investments')">üìä My Investments</button>
                <button class="tab" onclick="showUserTab('referrals')">ü§ù Referrals</button>
                <button class="tab" onclick="showUserTab('withdraw')">üí≥ Withdraw</button>
                <button class="tab" onclick="showUserTab('settings')">‚öôÔ∏è Settings</button>
            </div>

            <div id="tab-plans" class="tab-content active">
                <div class="card">
                    <div class="card-title">Investment Plans</div>
                    <div class="plans-grid" id="userPlansGrid"></div>
                </div>
            </div>

            <div id="tab-investments" class="tab-content">
                <div class="card">
                    <div class="card-title">My Investments</div>
                    <div id="userInvestmentsList"></div>
                </div>
            </div>

            <div id="tab-referrals" class="tab-content">
                <div class="card">
                    <div class="card-title">Your Referral Link</div>
                    <div class="referral-box">
                        <div class="referral-link" id="userReferralLink"></div>
                        <button class="btn-copy" onclick="copyLink()">üìã Copy Link</button>
                    </div>
                    <div id="userReferralsList"></div>
                </div>
            </div>

            <div id="tab-withdraw" class="tab-content">
                <div class="card">
                    <div class="card-title">Request Withdrawal</div>
                    <div id="withdrawAlert"></div>
                    <form onsubmit="submitWithdrawal(event)">
                        <div class="form-group">
                            <label class="form-label">Amount</label>
                            <input type="number" class="form-input" id="withdrawAmount" required>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Bank Name</label>
                            <input type="text" class="form-input" id="withdrawBank" required>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Account Number</label>
                            <input type="text" class="form-input" id="withdrawAccount" required>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Account Name</label>
                            <input type="text" class="form-input" id="withdrawName" required>
                        </div>
                        <button type="submit" class="btn-primary">Submit Request</button>
                    </form>
                </div>
            </div>

            <div id="tab-settings" class="tab-content">
                <div class="card">
                    <div class="settings-section">
                        <div class="settings-title">Choose Theme Color</div>
                        <div class="color-grid">
                            <div class="color-option active" style="background: linear-gradient(135deg, #6366f1, #8b5cf6)" onclick="changeColor('#6366f1', '#8b5cf6', '#ec4899')">
                                ‚úì
                            </div>
                            <div class="color-option" style="background: linear-gradient(135deg, #3b82f6, #2563eb)" onclick="changeColor('#3b82f6', '#2563eb', '#f59e0b')">
                            </div>
                            <div class="color-option" style="background: linear-gradient(135deg, #10b981, #059669)" onclick="changeColor('#10b981', '#059669', '#f59e0b')">
                            </div>
                            <div class="color-option" style="background: linear-gradient(135deg, #f59e0b, #d97706)" onclick="changeColor('#f59e0b', '#d97706', '#ec4899')">
                            </div>
                            <div class="color-option" style="background: linear-gradient(135deg, #ef4444, #dc2626)" onclick="changeColor('#ef4444', '#dc2626', '#f59e0b')">
                            </div>
                            <div class="color-option" style="background: linear-gradient(135deg, #ec4899, #d946ef)" onclick="changeColor('#ec4899', '#d946ef', '#f59e0b')">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Admin Dashboard -->
    <div id="adminDashboard" class="dashboard hidden">
        <div class="container">
            <div class="card">
                <div class="card-title">‚öôÔ∏è Admin Control Panel</div>
                <div class="wallet-grid">
                    <div class="wallet-item" style="background: var(--light);">
                        <span class="wallet-item-value" style="color: var(--primary);" id="adminTotalUsers">0</span>
                        <span class="wallet-item-label">Total Users</span>
                    </div>
                    <div class="wallet-item" style="background: var(--light);">
                        <span class="wallet-item-value" style="color: var(--success);" id="adminTotalInvested">‚Ç¶0</span>
                        <span class="wallet-item-label">Total Invested</span>
                    </div>
                    <div class="wallet-item" style="background: var(--light);">
                        <span class="wallet-item-value" style="color: var(--accent);" id="adminTotalDeposits">‚Ç¶0</span>
                        <span class="wallet-item-label">Total Deposits</span>
                    </div>
                    <div class="wallet-item" style="background: var(--light);">
                        <span class="wallet-item-value" style="color: var(--danger);" id="adminPending">0</span>
                        <span class="wallet-item-label">Pending</span>
                    </div>
                </div>
            </div>

            <div class="tabs">
                <button class="tab active" onclick="showAdminTab('users')">üë• All Users</button>
                <button class="tab" onclick="showAdminTab('investments')">üìä Investments</button>
                <button class="tab" onclick="showAdminTab('withdrawals')">üí∏ Withdrawals</button>
                <button class="tab" onclick="showAdminTab('account')">üè¶ Account</button>
            </div>

            <div id="admin-tab-users" class="tab-content active">
                <div class="card">
                    <div class="card-title">All Users (New & Old)</div>
                    <div id="adminUsersList"></div>
                </div>
            </div>

            <div id="admin-tab-investments" class="tab-content">
                <div class="card">
                    <div class="card-title">Pending Approvals</div>
                    <div id="adminPendingList"></div>
                </div>
                <div class="card">
                    <div class="card-title">Active Investments</div>
                    <div id="adminActiveList"></div>
                </div>
            </div>

            <div id="admin-tab-withdrawals" class="tab-content">
                <div class="card">
                    <div class="card-title">Pending Withdrawals</div>
                    <div id="adminWithdrawalsList"></div>
                </div>
            </div>

            <div id="admin-tab-account" class="tab-content">
                <div class="card">
                    <div class="card-title">Company Account Details</div>
                    <form onsubmit="updateCompanyAccount(event)">
                        <div class="form-group">
                            <label class="form-label">Account Number</label>
                            <input type="text" class="form-input" id="adminAccNumber" required>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Bank Name</label>
                            <input type="text" class="form-input" id="adminBank" required>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Account Name</label>
                            <input type="text" class="form-input" id="adminAccName" required>
                        </div>
                        <button type="submit" class="btn-primary">Update Account</button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Login Modal -->
    <div id="loginModal" class="modal">
        <div class="modal-content">
            <button class="modal-close" onclick="closeModal('loginModal')">√ó</button>
            <h2>Welcome Back!</h2>
            <p class="modal-subtitle">Login to your account</p>
            <div id="loginAlert"></div>
            <form onsubmit="handleLogin(event)">
                <div class="form-group">
                    <label class="form-label">Email</label>
                    <input type="email" class="form-input" id="loginEmail" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Password</label>
                    <input type="password" class="form-input" id="loginPassword" required>
                </div>
                <button type="submit" class="btn-primary">Login</button>
            </form>
            <div class="toggle-link">
                Don't have an account? <a onclick="switchToRegister()">Register</a>
            </div>
        </div>
    </div>

    <!-- Register Modal -->
    <div id="registerModal" class="modal">
        <div class="modal-content">
            <button class="modal-close" onclick="closeModal('registerModal')">√ó</button>
            <h2>Create Account</h2>
            <p class="modal-subtitle">Join and start earning today</p>
            <div id="registerAlert"></div>
            <form onsubmit="handleRegister(event)">
                <div class="form-group">
                    <label class="form-label">Full Name</label>
                    <input type="text" class="form-input" id="registerName" required>
